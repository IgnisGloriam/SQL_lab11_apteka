create table section (
    id int identity(1,1) primary key,
    name varchar(100) not null
);

create table disease (
    id int identity(1,1) primary key,
    name varchar(100) not null
);

create table active_substance (
    id int identity(1,1) primary key,
    name varchar(100) not null
);

create table manufacturer (
    id int identity(1,1) primary key,
    name varchar(100) not null,
    address varchar(100) not null
);

create table medication (
    id int identity(1,1) primary key,
    name varchar(100) not null,
    annotation varchar(1000) not null,
    section_id int not null foreign key references section(id)
);

create table drug (
    id int identity(1,1) primary key,
    quantity int not null check (quantity >= 0),
    price decimal(10,2) not null check (price >= 0),
    expiration_date date not null,
    medication_id int not null foreign key references medication(id),
    manufacturer_id int not null foreign key references manufacturer(id)
);

create table medication_indication (
    medication_id int foreign key references medication(id),
    disease_id int foreign key references disease(id),
    primary key (medication_id, disease_id)
);

create table medication_substance (
    medication_id int foreign key references medication(id),
    active_substance_id int foreign key references active_substance(id),
    primary key (medication_id, active_substance_id)
);

create table employee (
    id int identity(1,1) primary key,
    full_name varchar(100) not null,
    [address] varchar(100) not null,
    passport varchar(10) not null unique,
    profession varchar(10) not null
);

create table client (
    id int identity(1,1) primary key,
    full_name varchar(100) not null,
    address varchar(100) not null
);

create table sale (
    id int identity(1,1) primary key,
    sale_date date not null,
    total_amount decimal(10,2) not null check (total_amount >= 0),
    employee_id int not null foreign key references employee(id)
);

create table [order] ( 
    id int identity(1,1) primary key,
    order_date date not null,
    total_amount decimal(10,2) not null check (total_amount >= 0),
    client_id int not null foreign key references client(id)
);

create table sale_content (
    drug_id int foreign key references drug(id),
    sale_id int foreign key references sale(id),
    quantity int not null check (quantity > 0),
    primary key (drug_id, sale_id)
);

create table order_content (
    drug_id int foreign key references drug(id),
    order_id int foreign key references [order](id),
    quantity int not null check (quantity > 0),
    primary key (drug_id, order_id)
);
 


insert into section (name) values 
('Болеутоляющие'),
('Антибиотики'),
('Витамины'),
('Антигистамины'),
('Антидепрессанты'),
('Кардиоваскулярные'),
('Гастроинтестинал'),
('Дерматологические'),
('Гормональные'),
('Антивирал');

insert into disease (name) values 
('Грипп'),
('Ангина'),
('Мигрень'),
('Аллергия'),
('Депрессия'),
('Гипертензия'),
('Гастрит'),
('Экзема'),
('Диабет'),
('Герпес');

insert into active_substance (name) values 
('Парацетамол'),
('Ибупрофен'),
('Амоксициллин'),
('Лоратадин'),
('Сертралин'),
('Амлодипин'),
('Омепразол'),
('Гидрокортизон'),
('Инсулин'),
('Ацикловир');

insert into manufacturer (name, address) values 
('Фармакор', 'Москва, ул. Ленина, 1'),
('БиоКим', 'СПб, ул. Мира, 5'),
('HealthPlus', 'Казань, ул. Горького, 10'),
('MedExport', 'Москва, ул. Каховка, 31, корп. 2'),
('ЕвроФарма', 'Екатиринбург, ул. Индустрии, 28'),
('ВитаМед', 'Ростов, ул. Кавказская, 52'),
('БиоФарм', 'Воронеж, ул. Центральная, 28'),
('ФармСтандарт', 'Москва, ул. Садовническая, 82'),
('БиоКад', 'Московская обл., г. Щёлково, ул. Фабричная, 2'),
('ФП Оболенское', 'Московская обл., Серпуховский район, п. Оболенск');

insert into medication (name, annotation, section_id) values 
('Парацетамол 500гр', 'Лекарственное средство анальгетик и антипиретик, 
    входящее в группу анилидов и оказывающее жаропонижающее, обезболивающее действие.', 1),
('Ибупрофен 200гр', 'Оказывает обезболивающее, противовоспалительное, жаропонижающее действия.', 1),
('Амоксиклав 625гр', 'Антибактериальное средство. Используется для терапии инфекций дыхательных путей, 
    кожных покровов, мочевыводящих путей соединительных тканей и т. д.', 2),
('Лоратадин 10гр', 'Антигистаминный препарат – избирательный блокатор периферических Н1-гистаминовых рецепторов.', 4),
('Сертралин 50гр', 'СЕРТРАЛИН. Лечение депрессивных состояний различного 
    генеза у больных с моно- и биполярными аффективными расстройствами.', 5),
('Амлодипин 5гр', 'Амлодипин применяется для лечения повышенного артериального давления (гипертония) 
    или определенного типа болей в груди, известных как стенокардия, редкая форма которой является 
    стенокардия Принцметала или вариантная стенокардия.', 6),
('Омепразол 20гр', 'Предназначено для терапии язвы, ГЭРБ, эрадикации Helicobacter pylori.', 7),
('Гидрокортизон 1%', 'Оказывает противовоспалительное, противоотечное, противозудное действие. 
    Презназначен против экземы.', 8),
('Инсулин гранулированный', 'Регулирует метаболизм глюкозы, обладает анаболическим действием.', 9),
('Ацикловир 200гр', 'Противовирусный препарат - синтетический аналог ациклического пуринового нуклеозида, 
    обладающего высоко избирательным действием на вирусы.', 10);

insert into drug (quantity, price, expiration_date, medication_id, manufacturer_id) values 
(100, 50.00, '2025-12-31', 1, 1),
(50, 85.00, '2024-06-30', 2, 2),
(75, 320.00, '2024-09-15', 3, 3),
(200, 45.00, '2025-03-20', 4, 4),
(30, 120.00, '2024-12-01', 5, 5),
(60, 90.00, '2025-08-10', 6, 6),
(150, 75.00, '2024-11-30', 7, 7),
(80, 55.00, '2025-05-15', 8, 8),
(25, 450.00, '2024-10-20', 9, 9),
(100, 65.00, '2025-07-05', 10, 10);

insert into medication_indication (medication_id, disease_id) values 
(1, 1), (1, 3), -- Парацетамол от Гриппа и Мигрени
(2, 3), (2, 1), -- Ибупрофен от Мигрени и Гриппа
(3, 2),         -- Амоксиклав от Ангины
(4, 4),         -- Лоратадин от Аллергии
(5, 5),         -- Сертралин от Депрессии
(6, 6),         -- Амлодипин от Гипертонии
(7, 7),         -- Омепразол от Гастрита
(8, 8),         -- Гидрокортизон от Экземы
(9, 9),         -- Инсулин от Диабета
(10, 10);       -- Ацикловир от Герпеса

insert into medication_substance (medication_id, active_substance_id) values 
(1, 1),
(2, 2),
(3, 3),
(4, 4),
(5, 5),
(6, 6),
(7, 7),
(8, 8),
(9, 9),
(10, 10);

insert into employee (full_name, address, passport, profession) values 
('Иванов Иван Иванович', 'Москва, ул. Пушкина, 10', '1234567890', 'Фармацевт'),
('Петрова Анна Сергеевна', 'Москва, ул. Гагарина, 5', '0987654321', 'Кассир'),
('Сидоров Петр Васильевич', 'СПб, Невский пр-т, 15', '1122334455', 'Менеджер'),
('Козлова Мария Ивановна', 'Москва, ул. Моховая', '2233445566', 'Фармацевт'),
('Николаев Андрей Дмитриевич', 'Новосибирск', '3344556677', 'Кассир'),
('Сафонов Владислав Дмитриевич', 'Ярославль', '4455667788', 'Фармацевт'),
('Морозов Сергей Петрович', 'Ростов Великий', '5566778899', 'Кассир'),
('Волкова Ольга Александровна', 'Воронеж', '6677889900', 'Фармацевт'),
('Кузнецов Дмитрий Олегович', 'Самара', '7788990011', 'Менеджер'),
('Попова Ирина Сергеевна', 'Рыбинск', '8899001122', 'Кассир');

insert into client (full_name, address) values 
('Alexeev Alexey Vladimirovich', 'Moscow, Tverskaya st, 55'),
('Preobrazhenskiy Igor Evgenevich', 'SPb'),
('Lebedeva Natalia Andreevna', 'Kazan'),
('Egorov Egor Egorovich', 'Novosibirsk'),
('Tihomirov Egor Kakoy-to tam', 'Ekaterinburg'),
('Kruglishev Anton Vladimirovich', 'Balakirevo'),
('Vinogradova Marina Olegovna', 'Voronezh'),
('Krotov Pavel Anatolievich', 'Samara'),
('Belyakova Daria Romanovna', 'Krasnoyarsk'),
('Komarov Igor Valerievich', 'Ufa');

insert into sale (sale_date, total_amount, employee_id) values 
('2023-10-01', 100.00, 1),
('2023-10-02', 250.00, 2),
('2023-10-03', 75.00, 3),
('2023-10-04', 320.00, 4),
('2023-10-05', 45.00, 5),
('2023-10-06', 180.00, 6),
('2023-10-07', 90.00, 7),
('2023-10-08', 150.00, 8),
('2023-10-09', 220.00, 9),
('2023-10-10', 65.00, 10);

insert into [order] (order_date, total_amount, client_id) values 
('2023-10-01', 500.00, 1),
('2023-10-02', 750.00, 2),
('2023-10-03', 300.00, 3),
('2023-10-04', 450.00, 4),
('2023-10-05', 600.00, 5),
('2023-10-06', 350.00, 6),
('2023-10-07', 800.00, 7),
('2023-10-08', 250.00, 8),
('2023-10-09', 400.00, 9),
('2023-10-10', 550.00, 10);

insert into sale_content (drug_id, sale_id, quantity) values 
(1, 1, 2),
(2, 2, 3),
(3, 3, 1),
(4, 4, 7),
(5, 5, 1),
(6, 6, 2),
(7, 7, 1),
(8, 8, 3),
(9, 9, 1),
(10, 10, 1); 

insert into order_content (drug_id, order_id, quantity) values 
(1, 1, 10),
(2, 2, 5),
(3, 3, 2),
(4, 4, 15),
(5, 5, 3),
(6, 6, 4),
(7, 7, 8),
(8, 8, 6),
(9, 9, 2),
(10, 10, 3);